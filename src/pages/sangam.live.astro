---
import Layout from '../layouts/Layout.astro';

// ID видео из ваших ссылок
const videos = [
  {
    id: "obNZOSd8bBM",
    title: "Live Performance 1",
    desc: "Атмосферное погружение. Синтез живых инструментов и электроники."
  },
  {
    id: "mJequ6c908w",
    title: "Live Performance 2",
    desc: "Ритмическая структура и мелодическая импровизация в реальном времени."
  }
];
---

<Layout 
  title="Sangam.live | Solo Project by Demidenko" 
  description="Сольный проект Sangam.live. Live-looping, импровизация и слияние музыкальных традиций в реальном времени."
>
    <style>
        ::selection {
            background-color: #FFC107; /* amber-500 */
            color: #0f172a;
        }
    </style>

    <main class="bg-slate-900 text-slate-100 selection:bg-amber-500 selection:text-rose-300">
        
        <section class="relative min-h-[70vh] flex items-center justify-center overflow-hidden pt-20">
            <div class="absolute inset-0 z-0">
                <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-slate-900 via-slate-900/80 to-slate-900 z-10"></div>
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-amber-500/10 rounded-full blur-[120px] animate-pulse"></div>
            </div>

            <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
                <h2 class="text-amber-400 text-sm md:text-base tracking-[0.5em] uppercase mb-6 animate-fade-in">
                    Сольный проект
                </h2>
                
                <h1 class="text-6xl md:text-8xl lg:text-9xl font-serif font-light text-rose-400 mb-8 leading-none animate-fade-in-up">
                    Sangam<span class="text-rose-400">.live</span>
                </h1>
                
                <p class="text-xl md:text-2xl text-slate-300 font-light max-w-2xl mx-auto leading-relaxed mb-12 animate-fade-in-up [animation-delay:200ms]">
                     Гармония высших сфер. <br/>
                    <span class="text-amber-400/80 italic font-serif">Звук, рождающийся здесь и сейчас.</span>
                </p>

                <div class="flex justify-center gap-6 animate-fade-in [animation-delay:400ms]">
                    <a href="#listen" class="px-8 py-3 border border-amber-500/30 text-amber-400 hover:bg-amber-500/10 hover:border-amber-400 transition-all duration-300 uppercase tracking-widest text-xs">
                        Смотреть видео
                    </a>
                </div>
            </div>
        </section>

        <section class="py-20 bg-slate-900 relative">
            <div class="max-w-5xl mx-auto px-6 text-center">
                <p class="text-lg md:text-xl text-slate-300 font-light leading-loose">
                    <strong class="text-rose-400">Sangam</strong> (санскр. संगम) - этим словомм называют слияние рек в Индии. Вдохновлённый священныхми Гангой и Ямуной, я стараюсь ппередавать состояния и переживания от путешествий по святым местам на берегах этих рек и используя все доступные мне звуковые краски создаю живые звуковые полотна. В этом проекте я исследую слияние различных стилей и направлений музыки, используя как возможности живых инструментов, так и современные электронные звуки. Используя <span class="text-amber-400">live-looping</span>, я наслаиваю партии редких этнических инструментов, создавая симфонии нового времени. Это глубокая медитация в звуке, где каждая композиция уникальна и никогда не повторяется одинаково дважды.
                </p>
            </div>
        </section>

<section id="listen" class="py-24 bg-slate-950 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
             <h2 class="text-amber-400 text-center text-3xl font-serif italic" style="padding:30px;">Живые исполнения</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-16">
                    {videos.map((video) => (
                        <div class="group">
                            <div class="video-container relative aspect-video bg-slate-900 rounded-sm overflow-hidden p-1 cursor-pointer group-hover:shadow-[0_0_30px_rgba(244,63,94,0.2)] transition-all duration-500" data-id={video.id}>
                                
                                <div class="absolute inset-0 bg-gradient-to-br from-orange-500 via-rose-500 to-purple-600 opacity-20 group-hover:opacity-60 transition duration-700 pointer-events-none z-20"></div>
                                
                                <div class="iframe-slot absolute inset-0 w-full h-full bg-black z-10"></div>
                                <div class="video-cover absolute inset-0 z-30 bg-cover bg-center transition-opacity duration-500" style={`background-image: url('https://img.youtube.com/vi/${video.id}/maxresdefault.jpg')`}>
                                    <div class="absolute inset-0 bg-black/40 hover:bg-black/20 transition duration-500"></div>
                                    
                                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                                        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 to-rose-600 rounded-full flex items-center justify-center play-btn-pulse shadow-xl">
                                            <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            
                            <div class="mt-8 text-center md:text-left">
                                <h3 class="text-2xl text-white font-serif italic mb-2 group-hover:text-orange-400 transition-colors">
                                    {video.title}
                                </h3>
                                <p class="text-rose-200/60 text-sm font-light leading-relaxed">
                                    {video.desc}
                                </p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </section>


        <section class="py-24 bg-slate-900">
            <div class="max-w-5xl mx-auto px-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                    <div>
                        <h3 class="text-4xl text-amber-500 font-serif mb-6">
                            Формат <span class="text-amber-500 italic">выступлений</span>
                        </h3>
                        <div class="space-y-6 text-slate-300 font-light">
                            <p>
                                Проект <strong>Sangam.live</strong> идеально подходит для фестивалей, арт-пространств, йога-студий и камерных концертных залов.
                            </p>
                            <ul class="space-y-4 mt-8">
                                <li class="flex items-start">
                                    <span class="text-amber-500 mr-4">✦</span>
                                    <span>Полное погружение в атмосферу звука</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-amber-500 mr-4">✦</span>
                                    <span>Использование редких инструментов</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-amber-500 mr-4">✦</span>
                                    <span>Визуальная эстетика исполнения</span>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="mt-10">
                            <a href="/#contact" class="inline-flex items-center text-amber-200 border-b border-amber-500 pb-1 hover:text-amber-400 transition">
                                <span class="mr-2">←</span> Связаться по поводу выступлений
                            </a>
                        </div>
                    </div>

                    <div class="bg-slate-800/50 p-10 border border-amber-500/10 rounded-xl relative overflow-hidden">
                        <div class="absolute -right-10 -top-10 w-40 h-40 bg-amber-500/10 rounded-full blur-3xl"></div>
                        <h4 class="text-xs uppercase tracking-widest text-amber-500 mb-6">Инструментарий проекта</h4>
                        <div class="flex flex-wrap gap-3">
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">Фортепиано</span>
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">Дхрупад вокал</span>
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">Zynthian ambient synth</span>
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">Бансури и другие флейты</span>
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">Табла и другая перкуссия</span>
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">Loopy Pro</span>
                            <span class="px-4 py-2 bg-slate-900 border border-slate-700 text-slate-300 text-sm rounded-full">FX процессоры</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
<script is:inline>
        document.addEventListener('DOMContentLoaded', () => {
            const containers = document.querySelectorAll('.video-container');

            containers.forEach(container => {
                container.addEventListener('click', function() {
                    const videoId = this.getAttribute('data-id');
                    const slot = this.querySelector('.iframe-slot');
                    const cover = this.querySelector('.video-cover');

                    // 1. Если это видео уже играет, ничего не делаем
                    if (this.classList.contains('playing')) return;

                    // 2. ОСТАНАВЛИВАЕМ ВСЕ ОСТАЛЬНЫЕ ВИДЕО
                    containers.forEach(other => {
                        if (other.classList.contains('playing')) {
                            other.classList.remove('playing');
                            // Показываем обложку обратно
                            other.querySelector('.video-cover').style.opacity = '1';
                            other.querySelector('.video-cover').style.pointerEvents = 'auto';
                            // Удаляем iframe (это полностью останавливает звук и загрузку)
                            other.querySelector('.iframe-slot').innerHTML = '';
                        }
                    });

                    // 3. Также ставим на паузу любые <audio> теги, если они есть на странице
                    document.querySelectorAll('audio').forEach(audio => {
                        audio.pause();
                    });

                    // 4. ЗАПУСКАЕМ ТЕКУЩЕЕ ВИДЕО
                    this.classList.add('playing');
                    
                    // Скрываем обложку (делаем прозрачной, чтобы была плавная анимация)
                    cover.style.opacity = '0';
                    cover.style.pointerEvents = 'none';

                    // Создаем и вставляем iframe
                    // autoplay=1 запускает видео сразу
                    const iframe = document.createElement('iframe');
                    iframe.setAttribute('src', `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&showinfo=0`);
                    iframe.setAttribute('frameborder', '0');
                    iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                    iframe.setAttribute('allowfullscreen', 'true');
                    iframe.className = "w-full h-full absolute inset-0"; // Tailwind классы для полного заполнения
                    
                    // Очищаем слот на всякий случай и вставляем
                    slot.innerHTML = '';
                    slot.appendChild(iframe);
                });
            });
        });
    </script>
    </main>
</Layout>
